<div class="row page-content" ng-controller="TransHistoryCtrl as transactionHistory"> 
  <uib-tabset active="activeJustified" justified="false" type="pills">
    <uib-tab index="0" heading="Выданные предоплаты">
        <div class="table-responsive">
          <table ng-table="asksTableParams" class="table table-condensed table-bordered table-striped" show-filter="true">
              <tr ng-repeat-start="record in $data">
                  <td>
                      <a href="" ng-click="record.$hideRows = !record.$hideRows">
                          <span class="glyphicon" ng-class="{ 'glyphicon-chevron-right': record.$hideRows, 'glyphicon-chevron-down': !record.$hideRows }"></span>
                      </a></td>
                  <td data-title="'Сумма'" filter="{ 'quantity': 'number'}" sortable="'quantity'">
                      {{record.quantity}}</td>
                  <td data-title="'APR'" filter="{ 'price': 'number'}" sortable="'price'">
                      {{record.price}}</td>
                  <td data-title="'Дата'" sortable="'date'">
                      {{record.date | date:'dd/MM/yyyy'}}</td>
              </tr>
              <tr ng-hide="record.$hideRows" ng-repeat="trade in record.historyTrades" ng-repeat-end>
                  <td colspan="4">
                      <b>Название компании:</b> {{trade.invoice.source.name}};
                      <b>#Платежа:</b> {{trade.invoice.id}};
                      <b>Сумма:</b> {{trade.quantity}};
                      <b>Скидка:</b> {{trade.discountValue}}</td>
              </tr>
          </table>
        </div>
    </uib-tab>
    <uib-tab index="1" heading="Полученные предоплаты">
       <div class="table-responsive">
           <table ng-table="bidsTableParams" class="table table-condensed table-bordered table-striped" show-filter="true">
               <tr ng-repeat-start="record in $data">
                   <td>
                       <a href="" ng-click="record.$hideRows = !record.$hideRows">
                           <span class="glyphicon" ng-class="{ 'glyphicon-chevron-right': record.$hideRows, 'glyphicon-chevron-down': !record.$hideRows }"></span>
                       </a></td>
                   <td data-title="'Сумма'" filter="{ 'quantity': 'number'}" sortable="'quantity'">
                       {{record.quantity}}</td>
                   <td data-title="'APR'" filter="{ 'price': 'number'}" sortable="'price'">
                       {{record.price}}</td>
                   <td data-title="'Дата'" sortable="'date'">
                       {{record.date | date:'dd/MM/yyyy'}}</td>
               </tr>
               <tr ng-hide="record.$hideRows" ng-repeat="trade in record.historyTrades" ng-repeat-end>
                   <td colspan="4">
                       <b>Название компании:</b> {{trade.invoice.target.name}};
                       <b>#Платежа:</b> {{trade.invoice.id}};
                       <b>Сумма:</b> {{trade.quantity}};
                       <b>Скидка:</b> {{trade.discountValue}}</td>
               </tr>
           </table>
        </div>  
    </uib-tab>
  </uib-tabset>  
</div>